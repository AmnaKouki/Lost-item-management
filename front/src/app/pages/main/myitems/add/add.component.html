<app-main>
  <div class="flex flex-col">
    <div class="-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
      <div
        class="md:flex md:items-center md:justify-between sm:px-6 lg:px-8 py-4"
      >
        <div class="flex-1 min-w-0">
          <h2 class="text-lg leading-6 font-medium text-gray-900">
            Add New Item
          </h2>
          <p class="mt-1 max-w-2xl text-sm text-gray-500">
            Fill in the details of the new item
          </p>
        </div>
      </div>
    </div>

    <form class="space-y-8 divide-y divide-gray-200" [formGroup]="AddForm">
      <div class="space-y-8 divide-y divide-gray-200 sm:space-y-5">
        <div>
          <div class="mt-6 sm:mt-5 space-y-6 sm:space-y-5">
            <div
              class="sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-t sm:border-gray-200 sm:pt-5"
            >
              <label
                for="name"
                class="block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2"
              >
                Item Name
              </label>
              <div class="mt-1 sm:mt-0 sm:col-span-2">
                <div class="max-w-lg flex rounded-md shadow-sm">
                  <input
                    type="text"
                    name="username"
                    id="username"
                    formControlName="name"
                    autocomplete="username"
                    class="flex-1 block w-full focus:ring-radical-red-500 focus:border-radical-red-500 min-w-0 rounded-md sm:text-sm border-gray-300"
                  />
                </div>
              </div>
            </div>

            <div
              class="sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-t sm:border-gray-200 sm:pt-5"
            >
              <label
                for="description"
                class="block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2"
              >
                Description
              </label>
              <div class="mt-1 sm:mt-0 sm:col-span-2">
                <textarea
                  id="description"
                  name="description"
                  rows="3"
                  formControlName="description"
                  class="max-w-lg shadow-sm block w-full focus:ring-radical-red-500 focus:border-radical-red-500 sm:text-sm border border-gray-300 rounded-md"
                ></textarea>
                <p class="mt-2 text-sm text-gray-500">
                  Write a few sentences describing the item
                </p>
              </div>
            </div>

            <div
              class="sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-t sm:border-gray-200 sm:pt-5"
            >
              <label
                for="name"
                class="block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2"
              >
                Category
              </label>
              <div class="mt-1 sm:mt-0 sm:col-span-2">
                <div class="max-w-lg flex rounded-md shadow-sm">
                  <select
                    name="HeadlineAct"
                    id="HeadlineAct"
                    formControlName="category"
                    class="mt-1.5 w-full rounded-lg border-gray-300 text-gray-700 sm:text-sm"
                  >
                    <option value="">Please select</option>
                    <option value="Electronics">Electronics</option>
                    <option value="Personal Accessories">
                      Personal Accessories
                    </option>
                    <option value="Clothing and Accessories">
                      Clothing and Accessories
                    </option>
                    <option value="Travel Items">Travel Items</option>
                    <option value="Sports Equipment">Sports Equipment</option>
                    <option value="Books and Stationery">
                      Books and Stationery
                    </option>
                    <option value="Toys and Games">Toys and Games</option>
                    <option value="Musical Instruments">
                      Musical Instruments
                    </option>
                    <option value="Pets">Pets</option>
                    <option value="Home and Kitchen">Home and Kitchen</option>
                    <option value="Health and Beauty">Health and Beauty</option>
                    <option value="Food and Beverages">
                      Food and Beverages
                    </option>
                    <option value="Other">Other</option>
                  </select>
                </div>
              </div>
            </div>

            <div
              class="sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-t sm:border-gray-200 sm:pt-5"
            >
              <label
                for="cover-photo"
                class="block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2"
              >
                Item Photo
              </label>
              <div class="mt-1 sm:mt-0 sm:col-span-2">
                <div
                  (drop)="onDrop($event)"
                  (dragover)="onDragOver($event)"
                  [ngClass]="{ 'border-radical-red-500': isDragging }"
                  class="max-w-lg flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md cursor-pointer"
                >
                  <div class="space-y-1 text-center">
                    <svg
                      class="mx-auto h-12 w-12 text-gray-400"
                      stroke="currentColor"
                      fill="none"
                      viewBox="0 0 48 48"
                      aria-hidden="true"
                    >
                      <path
                        d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                    <div class="flex text-sm text-gray-600">
                      <label
                        for="file-upload"
                    
                        class="relative cursor-pointer rounded-md font-medium text-radical-red-600 hover:text-radical-red-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-radical-red-500"
                      >
                        <span>Upload a file</span>
                        <input
                          id="file-upload"
                          name="file-upload"
                          type="file"
                          class="sr-only"
                          accept="image/*"
                          #filePicker
                          (change)="onImagePicked($event)"
                        />
                      </label>
                      <p class="pl-1">or drag and drop</p>
                    </div>
                    <p class="text-xs text-gray-500">
                      PNG, JPG, GIF up to 10MB
                    </p>
                    <img
                      *ngIf="imageUrl"
                      [src]="imageUrl"
                      alt="Preview"
                      class="h-32 mx-auto rounded my-2"
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="pt-5">
        <div class="flex justify-start">
          <button
            (click)="saveItem($event)"
            class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-radical-red-600 hover:bg-radical-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-radical-red-500"
          >
            <i class="pi pi-save mr-2"></i>
            Save Item
          </button>
          <button
            (click)="resetForm($event)"
            type="button"
            class="ml-3 bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-radical-red-500"
          >
            <i class="pi pi-refresh mr-2"></i>
            Reset Form
          </button>
          <button
            (click)="cancel()"
            type="button"
            class="ml-3 bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-radical-red-500"
          >
            <i class="pi pi-arrow-left mr-2"></i>
            Go Back
          </button>
        </div>
      </div>
    </form>
  </div>

  <p-dialog
    header="Item Saved Successfully"
    [modal]="true"
    [(visible)]="visible"
    [style]="{ width: '25rem' }"
    (onHide)="hideDialog()"
  >
    <span class="p-text-secondary block text-center">
      Save this QR code to track your item</span
    >
    <!-- <img
      src="https://cdn.ttgtmedia.com/rms/misc/qr_code_barcode.jpg"
      alt="qr"
    /> -->
    <qrcode
      #parent
      [qrdata]="qrString"
      [width]="300"
      [cssClass]="'center'"
      [allowEmptyString]="true"
      [ariaLabel]="'QR Code'"
      [cssClass]="'center'"
      [colorDark]="'#000000ff'"
      [colorLight]="'#ffffffff'"
      [elementType]="'canvas'"
      [errorCorrectionLevel]="'M'"
      [imageHeight]="75"
      [imageWidth]="75"
      [margin]="4"
      [scale]="1"
      [imageSrc]="'./assets/scanme.png'"
      [width]="300"
      (qrCodeURL)="onChangeURL($event)"
      [elementType]="'canvas'"
    ></qrcode>

    <button
      (click)="saveAsImage(parent)"
      class="w-full inline-flex justify-center py-2 mt-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-radical-red-600 hover:bg-radical-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-radical-red-500"
    >
      <i class="pi pi-qrcode mr-2"></i>
      Download QR
    </button>
    <button
      (click)="printQRCode(parent)"
      class="w-full inline-flex justify-center py-2 mt-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gray-600 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"
    >
      <i class="pi pi-print mr-2"></i>
      Print QR Code
    </button>
  </p-dialog>
</app-main>
